<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
<!--     <script async src="https://www.googletagmanager.com/gtag/js?id=G-1T4J5ZSK8X"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-1T4J5ZSK8X');
    </script> -->
    
    
    <!-- Google Tag Manager -->
<!--         <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5BF8XFB');</script> -->
    <!-- End Google Tag Manager -->
    
<!-- Uncomment to use regular init instead of Google Tag Manager     -->

    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>

    <!--     Uncomment for Typical Site Setup -->
<!--     <script>
      console.log("Using Typical Site Setup");
      window.OneSignal = window.OneSignal || [];
      OneSignal.push(function() {
        OneSignal.init({
          appId: "000b64e3-4806-4e2c-b23a-3463f9f058fd",
        });
      });
</script> -->
    
    
<!--     Uncomment for Custom Code Setup -->
    <script>
        console.log("Using Custom Code Setup");
        var OneSignal = window.OneSignal || [];
        var initConfig = {
        appId: "000b64e3-4806-4e2c-b23a-3463f9f058fd",
            promptOptions: {
      slidedown: {
        prompts: [
          {
            type: "category",
            autoPrompt: false,
            text: {
              actionMessage: "We'd like to show you notifications for the latest news and updates.",
              acceptButton: "Allow",
              cancelButton: "Cancel",

              /* CATEGORY SLIDEDOWN SPECIFIC TEXT */
              negativeUpdateButton:"Cancel",
              positiveUpdateButton:"Save Preferences",
              updateMessage: "Update your push notification subscription preferences.",
            },
//             delay: {
//               pageViews: 3,
//               timeDelay: 5
//             },
            categories: [
              {
                tag: "dank_memes",
                label: "Dank Memes"
              },
              {
                tag: "dad_jokes",
                label: "Dad Jokes"
              },
              {
                tag: "animal_pics",
                label: "Cute Animal Pics",
              }
            ]
          }
        ]
      }
    }
        };
            
        OneSignal.push(function () {
        OneSignal.SERVICE_WORKER_PARAM = { scope: '/onesignal-web-demo/' };
        OneSignal.SERVICE_WORKER_PATH = 'onesignal-web-demo/OneSignalSDKWorker.js'
        OneSignal.SERVICE_WORKER_UPDATER_PATH = 'onesignal-web-demo/OneSignalSDKUpdaterWorker.js'
        OneSignal.init(initConfig);
    });
    </script>
    <link rel="stylesheet" href="styles.css">

    <title>Web Push Demo</title>

    </head>

    <body>
    
<!--     <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5BF8XFB"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    
    <h1>OneSignal Web Demo</h1>
    <!-- Subscribe image with Category Slidedown-->
    <div>
        <h3>Click the Subscribe animation to launch the Category Slidedown Prompt!</h3>
        <img id="bell-img" src="https://i.pinimg.com/originals/89/2f/52/892f52ae55d6ad7c402c16ed4d00bc07.gif" width= "150">
    </div>
    <br>
    <div>
        <h3><a href="path1.html">More About Prompting</a></h3>
    </div>
<!--     <div>
        <h3>Tagging</h3>
        <form id="nameTags">
            <label for="fname">First name:</label><br>
            <input type="text" id="fname" name="fname"><br>
            <label for="lname">Last name:</label><br>
            <input type="text" id="lname" name="lname">
        </form>
    </div> -->
<!--     <br>
    <div>
        <button id="tag-btn">click to tag yourself!</button>
    </div> -->
<!--     <br>
    <div>
    <button id="untag-btn">click to untag yourself</button>
    </div> -->
    
    
    <script>
        
    // <!-- OneSignal Methods -->

    // Trigger Category Slidedown from image click
    const bellBtn = document.getElementById("bell-img");
    bellBtn.onclick = function() {
        OneSignal.push(function() {
            console.log("Showing Category Slidedown!");
            OneSignal.showCategorySlidedown();
        });
    }        

//     // Tag User with first and last names      
//     const tagUser = document.getElementById("tag-btn");
//     tagUser.addEventListener("click", () => {
//         const fName = document.getElementById("fname").value;
//         const lName = document.getElementById("lname").value;
//         OneSignal.push(function () {
//             OneSignal.sendTags({
//             fName: fName,
//             lName: lName,
//             }).then(function (tagsSent) {
//             console.log(tagsSent);
//             });
//         });
//     });
        
    // Remove Tags
//     const untagUser = document.getElementById("untag-btn");
//     untagUser.addEventListener("click", () => {
//         OneSignal.push(function () {
//             OneSignal.sendTags({
//             fName: "",
//             lName: "",
//             }).then(function (tagsSent) {
//             console.log(tagsSent);
//             });
//         });
//     });

   

//     // subscriptionChange Event
//     OneSignal.push(function() {
//       // Occurs when the user's subscription changes to a new value.
//       OneSignal.on('subscriptionChange', function (isSubscribed) {
//         console.log("The user's subscription state is now:", isSubscribed);
//           if (isSubscribed) {
//         console.log("Add whatever else you need to accomplish in this listener");
//         };
//       });

//       // This event can be listened to via the `on()` or `once()` listener.
//     });   

    // Tag User based on browser type                
    // Example from Stackoverflow: https://stackoverflow.com/questions/11219582/how-to-detect-my-browser-version-and-operating-system-using-javascript
//     var os = "Unknown OS";
//     if (navigator.userAgent.indexOf("Win") != -1) os = "Windows";
//     if (navigator.userAgent.indexOf("Mac") != -1) os = "Macintosh";
//     if (navigator.userAgent.indexOf("Linux") != -1) os = "Linux";
//     if (navigator.userAgent.indexOf("Android") != -1) os = "Android";
//     if (navigator.userAgent.indexOf("like Mac") != -1) os = "iOS";
//     console.log('Your os: ' + os);

//     var browserType = "Unknown Browser Type";
//     if (navigator.userAgent.indexOf("Safari") != -1) browserType = "Safari";
//     if (navigator.userAgent.indexOf("Chrome") != -1) browserType = "Chrome";
//     if (navigator.userAgent.indexOf("OPR") != -1) browserType = "Opera";
//     if (navigator.userAgent.indexOf("Firefox") != -1) browserType = "Firefox";
//     console.log('Your Browser: ' + browserType);

//     OneSignal.push(function() {
//       OneSignal.sendTags({
//         os: os,
//         browserType: browserType,
//       }).then(function(tagsSent) {
//         // Callback called when tags have finished sending 
//         console.log("tagsSent: ", tagsSent);
//       });
//     });     
    </script>
</body>
</html>
